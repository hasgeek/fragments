---
---

{% if page.description %}
  {% assign description = page.description %}
{% else %}
  {% assign description = site.description %}
{% endif %}

<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <meta charset="UTF-8">
    <title>Fragments</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="{{ description }}">
    <link rel="stylesheet" href="{{ site.url }}{{ site.baseurl }}/css/main.css">
    {% if page.custom_css %}
    <link rel="stylesheet" href="{{ site.url }}{{ site.baseurl }}/css/{{ page.custom_css }}">
    {% endif %}
    {% if page.boxoffice_item_collection %}
      {% include boxoffice_styles.html %}
    {% endif %}
    {% if page.venue %}
      <link rel="stylesheet" href="{{ site.url }}{{ site.baseurl }}/css/leaflet.css">
    {% endif %}
    <link rel="stylesheet" href="//cdn.jsdelivr.net/jquery.sidr/2.2.1/stylesheets/jquery.sidr.light.min.css">
</head>
<body class="main font-black">
  {% include sidebar_site.html %}

  {% include navbar_site.html %}

  {{ content }}

  <script src="{{ site.url }}{{ site.baseurl }}/js/jquery-3.2.1.min.js"></script>
  <script src="//cdn.jsdelivr.net/jquery.sidr/2.2.1/jquery.sidr.min.js"></script>
{% if page.venue %}
  <script src="{{ site.url }}{{ site.baseurl }}/js/leaflet.js"></script>
{% endif %}
<script>
  $(document).ready( function() {

    var stickyNav = $(".nav-sticky");
    var navHeight;
    if (stickyNav.length > 0) {
      stuck = "nav-stuck";
      headerHeight = $(stickyNav[0]).offset().top;
      nextSibling = stickyNav.parent().next()[0];
      navHeight = stickyNav[0].clientHeight;
      $(window).scroll(function() {
        if( $(this).scrollTop() > headerHeight - navHeight) {
          stickyNav.parent().addClass(stuck);
          nextSibling.style.marginTop = navHeight+"px";
        } else {
          stickyNav.parent().removeClass(stuck);
          nextSibling.style.marginTop = 0;
        }
      });
    }
    $("a").click(function (e) {
      var goto = $(this).attr('data-href');
      if (goto) {
        // Prevent a page reload when a link is pressed
        e.preventDefault();
        // Scroll to section
        var offset_top = $(goto).offset().top - navHeight || 0;
        $("body,html").stop(true,true).animate({scrollTop:offset_top},300)
      }
    });

    {% if page.venue %}
      initLeaflets();
    {% endif %}

    $('#sidebar').show();
    $('.nav-toggle').sidr({
      name: 'sidebar',
      source: '#sidebar',
      renaming: false
    });

    // Toggle button
      // document.querySelector('.nav-toggle').addEventListener('click', function() {
      //   slideout.toggle();
      // });
  })

  function showModal(modalId) {
    $('#'+modalId).addClass('is-active');
  }
  function hideModal(modalId) {
    $('#'+modalId).removeClass('is-active');
  }
</script>
{% if page.boxoffice_item_collection %}
  {% include boxoffice_js.html %}
{% endif %}

</body>
</html>
